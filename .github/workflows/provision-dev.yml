name: Provision - DEV

on:
  workflow_dispatch:

jobs:
  terraform-plan:
    uses: viorelll/clean-architecture-products/.github/workflows/terraform-plan.yml@main
    with:
      working-directory: infrastructure/terraform/dev
      environment: dev
      plan-artifact-name: tfplan
    secrets: inherit
  terraform-apply:
    uses: viorelll/clean-architecture-products/.github/workflows/terraform-apply.yml@main
    needs: terraform-plan
    with:
      working-directory: infrastructure/terraform/dev
      environment: dev
      plan-artifact-name: tfplan
    secrets: inherit
